Some parts of the presheaf model:

-- Some category
module (C : Set)

-- Con is a presheaf over some C category
Con     = 
  (Î“ : C â†’ Set) Ã—                              -- action on objects
  (_[_]{Î“} : Î“ I â†’ C(J,I) â†’ Î“ J) Ã—             -- action on morphisms
  ([âˆ˜]{Î“} : Î³*[iâˆ˜j]{Î“} = Î³*[i]{Î“}[j]{Î“}) Ã—      -- functor laws (substitutionm laws)
  ([id]{Î“} : Î³*[id]{Î“} = Î³*)

Sub Î” Î“ = 
  (Î³ : {I:C}â†’ Î” I â†’ Î“ I) Ã—                    -- natural transformations 
  ([Î³] : (Î³ Î´*)[i]{Î“} = Î³ (Î´*[id]{Î”}))        -- law (subst)

Ty Î“    = 
  (A : (I:C) â†’ Î“ I â†’ Set) Ã— -- dep presheaf over Con
  (_[_]{A} : A I Î³* â†’ (i:C(J,I)) â†’ A J (Î³*[i]{Î“})) Ã— 
  ([âˆ˜]{A}: a*[iâˆ˜j]{A} = a*[i]{A}[j]{A}) Ã— 
  ([id]{A} : a*[id]{A} = a*)

Tm Î“ A  = 
  (a : {I:C} â†’ (Î³*:Î“ I) â†’ A I Î³*) Ã— 
  ([a] : (a {I} Î³*)[i]{A} = a {J} (Î³*[i]{Î“}))

-- Normal presheaf model stuff until here

-- Prop valued types (Prop valued dep presheafs over Con)
Typ Î“   = 
  (X : (I:C) â†’ Î“ I â†’ Prop) Ã— 
  (_[_]{X} : X I Î³* â†’ (i:C(J,I)) â†’ X J (Î³*[i]{Î“}))

X[Î³]{Typ} I Î´* = X I (Î³ Î´*)
x*[i]{X[Î³]{Typ}} = x*[i]{X}
Tmp Î“ X = ({I:C}(Î³*:Î“ I) â†’ X I Î³*) Ã— _ -- ?
y : C â†’ Con
yI J := C(J,I)
U : Con
U I := Ty yI
P : Con
P I = Typ yI
X[i]{P} = X[yi]{Typ}
ElP : Typ P
ElP I X := X I id_I
x*[i]{ElP} := x*[i]{X}

K : Con â†’ Ty Î“
K Î” I Î³* := Î” I
Sub Î” Î“ = Tm Î” (K Î“)
Î p A B I Î³* = Tmp (yIâ–¹A[yl Î³*]) (B[yl Î³*âˆ˜p,q])
            = {J:C}(i:C(J,I))(a* : A J (Î³*[i])) â†’ B J (Î³*[i],a*)


A Prop-valued monad (Grothendieck topology):

-- is ğ’¥  : Typ P == Typ (Typ y_) ???

| internally to a presheaf model  | externally                                               |      |
|---------------------------------+----------------------------------------------------------+------|
| ğ’¥  : Prop â†’ Prop                | ğ’¥  : Typ P                                               | \McJ |
| Î·  : âˆ€X.X â†’ ğ’¥ X                 | Î·  : Tmp (P â–¹ ElP) (ğ’¥[p])                                |      | -- why isnt this (ğ’¥[q])
| â‰«= : âˆ€X Y â†’ ğ’¥ X â†’ (X â†’ ğ’¥ Y) â†’ ğ’¥ Y | â‰«= : Tmp (P â–¹ K P â–¹ ğ’¥[p] â–¹ Elp[pÂ²] â‡’ ğ’¥[q[p]]) (ğ’¥[q[pÂ²]]) | \gg  |

externally, unfolded:
-- C â†’ (C â†’ Prop) â†’ Prop
-- (I:C) â†’ Typ yI â†’ Prop
| ğ’¥       : (I:C) â†’ Typ yI â†’ Prop                                                                          |
| ğ’¥       : (I:C) â†’ (X:(J:C)â†’C(J,I)â†’Prop)Ã—(X J iâ†’(j:C(K,J))â†’X K (iâˆ˜j)) â†’ Prop                              |
| _[_]{ğ’¥} : ğ’¥ I X â†’ (i:C(J,I)) â†’ ğ’¥ J (X[yi]{Typ})                                                          |
| Î·       : {I:C} â†’ (X:Typ yI) Ã— X I id_I â†’ ğ’¥ I X                                                          |
| â‰«=      : {I:C} â†’ (X:Typ yI) Ã— (Y:Typ yI) Ã— ğ’¥ I X Ã— ({J:C}(i:C(J,I)) â†’ X J i â†’ ğ’¥ J (Y[yi]{Typ})) â†’ ğ’¥ I Y |

A is a ğ’¥-sheaf:

| internally to a presheaf model            | externally                            |
|-------------------------------------------+---------------------------------------|
| A   : Set                                 | A   : Con                             |
| ask : âˆ€X.ğ’¥ X â†’ (X â†’ A) â†’ A                | ask : Tm (P â–¹ ğ’¥ â–¹ ElP[p] â‡’ K A) (K A) |
| Ïƒ   : âˆ€X.(x#:ğ’¥ X)(a*:A)â†’ask x# (Î»_.a) = a | TODO                                  |

For any C, we define the following ğ’¥:

ğ’¥ I X := âˆ€J.(i:C(J,I)) â†’ âˆ¥(K:C)Ã—(j:C(K,J))Ã—X K (iâˆ˜j)âˆ¥   <- ez internalizalhato?
x#[i]{ğ’¥} := Î»K j.x# K (iâˆ˜j)
Î· {I} (X,x*) := Î»J i.mk(J,i,x*[i]{X})
â‰«= {I} (X,Y,x#,f) := TODO
  X,Y : Typ yI
  x#  : ğ’¥ I X
  f   : ...
